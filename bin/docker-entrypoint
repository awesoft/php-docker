#!/usr/bin/env sh
# shellcheck disable=SC2086

DEBUG_ENABLED=${DEBUG_ENABLED:-0}
PHP_EXTENSIONS="bcmath bz2 calendar exif ftp gd gettext gmp intl mysqli opcache pdo_mysql shmop soap sodium sockets sysvmsg sysvsem sysvshm tidy xsl zip pcntl redis"

if [ "$DEBUG_ENABLED" = "1" ]; then
    PHP_EXTENSIONS="${PHP_EXTENSIONS} xdebug pcov"
fi

for e in ${PHP_EXTENSIONS}; do
  ln -svf /usr/local/etc/php/extensions/docker-php-ext-${e}.ini /usr/local/etc/php/conf.d/ > /dev/null
done

exec "$@"
